import { Link } from "wouter";
import { Menu, X } from "lucide-react";
import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

export function Nav() {
  const [isOpen, setIsOpen] = useState(false);

  const links = [
    { href: "#", label: "Community" },
    { href: "#", label: "Resources" },
    { href: "#", label: "Pricing" },
    { href: "#", label: "Careers" },
  ];

  return (
    <nav className="fixed top-0 left-0 w-full z-50 bg-background/80 backdrop-blur-sm text-foreground py-4 border-b border-transparent">
      <div className="container mx-auto px-6 md:px-12 flex justify-between items-center">
        <Link href="/">
          <a className="flex items-center gap-2 group">
             {/* Logo SVG based on provided asset */}
             <svg width="135" height="28" viewBox="0 0 135 28" fill="none" xmlns="http://www.w3.org/2000/svg" className="h-6 w-auto text-foreground">
              <path d="M40.1623 21.2112C39.2331 21.2112 38.3954 21.0493 37.6492 20.7255C36.903 20.4016 36.2835 19.923 35.7908 19.2894L37.2691 18.0223C37.6914 18.5151 38.149 18.8741 38.6418 19.0994C39.1486 19.3105 39.7188 19.4161 40.3523 19.4161C40.6058 19.4161 40.8381 19.388 41.0492 19.3317C41.2745 19.2613 41.4646 19.1627 41.6194 19.036C41.7884 18.9093 41.9151 18.7615 41.9996 18.5925C42.084 18.4095 42.1263 18.2124 42.1263 18.0012C42.1263 17.6351 41.9925 17.3395 41.725 17.1142C41.5842 17.0157 41.4012 16.9383 41.1759 16.882C40.9648 16.8256 40.7184 16.7834 40.4368 16.7552L39.0219 16.6285C38.3884 16.5722 37.8042 16.4455 37.2691 16.2484C36.7342 16.0514 36.2694 15.7839 35.8752 15.446C35.4811 15.1082 35.1714 14.707 34.9461 14.2425C34.7209 13.778 34.6083 13.2501 34.6083 12.6589C34.6083 11.9691 34.7631 11.3567 35.0728 10.8218C35.3825 10.2869 35.805 9.83646 36.3406 9.47046C36.8755 9.10446 37.5016 8.81591 38.2195 8.60476C38.9374 8.39361 39.7118 8.28809 40.5424 8.28809C41.3729 8.28809 42.1471 8.41472 42.865 8.6681C43.5829 8.92147 44.2093 9.25929 44.7442 9.68161L43.435 11.0963C43.0268 10.7444 42.5693 10.477 42.0629 10.294C41.5562 10.111 41.0421 10.0195 40.5212 10.0195C40.2678 10.0195 40.0356 10.0477 39.8244 10.104C39.6133 10.1603 39.4303 10.2447 39.2754 10.3574C39.1206 10.47 38.9939 10.6108 38.8954 10.7796C38.7968 10.9485 38.7476 11.1455 38.7476 11.3708C38.7476 11.7227 38.8813 12.0042 39.1487 12.2153C39.2895 12.3139 39.4654 12.3913 39.6766 12.4476C39.8877 12.5039 40.127 12.5461 40.3945 12.5742L41.9572 12.722C42.5907 12.7924 43.1678 12.9261 43.6884 13.1232C44.2092 13.3203 44.6667 13.5877 45.0608 13.9255C45.4549 14.2634 45.7646 14.6648 45.9898 15.1293C46.215 15.5938 46.3276 16.1218 46.3276 16.713C46.3276 17.4168 46.1657 18.0432 45.842 18.5925C45.5182 19.1414 45.0819 19.6059 44.5331 19.986C43.9841 20.3661 43.3438 20.6552 42.6117 20.8522C41.8797 21.0493 41.0632 21.1478 40.1623 21.1478V21.2112ZM51.3283 21.2112C50.3148 21.2112 49.3857 20.9719 48.5411 20.4933C47.6965 20.0147 47.0138 19.346 46.493 18.4869C45.9722 17.6283 45.7118 16.6356 45.7118 15.5093C45.7118 14.3831 45.9652 13.3837 46.4719 12.511C46.9786 11.6383 47.6543 10.9626 48.4989 10.4841C49.3435 10.0055 50.2796 9.76618 51.3072 9.76618C52.2925 9.76618 53.1864 9.99144 53.9888 10.4419C54.7912 10.8923 55.4317 11.5327 55.9103 12.3632C56.3888 13.1937 56.6281 14.1508 56.6281 15.2348C56.6281 15.4037 56.6211 15.5867 56.607 15.7838H47.5488C47.6051 16.4876 47.8585 17.0788 48.3088 17.5573C48.7593 18.0359 49.3641 18.2752 50.1248 18.2752C50.7301 18.2752 51.2509 18.1485 51.6873 17.8951C52.1236 17.6418 52.4755 17.2969 52.7429 16.8605L54.3477 17.6206C54.01 18.2963 53.4892 18.8453 52.7851 19.2676C52.0813 19.6899 51.2509 19.901 50.2938 19.901L51.3283 21.2112ZM51.2227 11.0753C50.533 11.0753 49.9559 11.2864 49.4914 11.7087C49.0269 12.131 48.7172 12.694 48.5622 13.3978H53.9466C53.8621 12.7221 53.5806 12.1803 53.102 11.772C52.6235 11.3638 52.0041 11.1598 51.2438 11.1598L51.2227 11.0753ZM62.8315 21.2112C61.804 21.2112 60.8749 20.9719 60.0445 20.4933C59.214 20.0147 58.5454 19.346 58.0387 18.4869C57.532 17.6283 57.2786 16.6356 57.2786 15.5093C57.2786 14.3831 57.532 13.3837 58.0387 12.511C58.5454 11.6383 59.214 10.9626 60.0445 10.4841C60.8749 10.0055 61.804 9.76618 62.8315 9.76618C63.662 9.76618 64.4221 9.94921 65.1118 10.3152C65.8015 10.6812 66.3575 11.195 66.7798 11.8566L66.8853 10.0195H68.6167V21.0001H66.8431V19.1631L66.7376 19.1209C66.3153 19.7825 65.7663 20.2962 65.0907 20.6622C64.4151 21.0282 63.662 21.2112 62.8315 21.2112ZM62.9793 19.6054C63.6409 19.6054 64.2461 19.4435 64.7951 19.1197C65.344 18.7959 65.7733 18.3455 66.083 17.7684C66.3926 17.1913 66.5475 16.53 66.5475 15.7838V15.2348C66.5475 14.4888 66.3926 13.8272 66.083 13.2501C65.7733 12.673 65.344 12.2226 64.7951 11.8988C64.2461 11.5751 63.6409 11.4132 62.9793 11.4132C62.3318 11.4132 61.7336 11.5751 61.1846 11.8988C60.6357 12.2226 60.2064 12.673 59.8967 13.2501C59.5871 13.8272 59.4322 14.4888 59.4322 15.2348V15.7838C59.4322 16.53 59.5871 17.1913 59.8967 17.7684C60.2064 18.3455 60.6357 18.7959 61.1846 19.1197C61.7336 19.4435 62.3318 19.6054 62.9793 19.6054ZM71.2127 21.0001V10.0195H72.965V11.8143L73.0706 11.8566C73.4506 11.195 73.9644 10.6883 74.6119 10.3363C75.2594 9.98444 76.0124 9.8084 76.871 9.8084V11.5821H76.3643C75.5338 11.5821 74.837 11.8284 74.2741 12.3211C73.7111 12.8137 73.4296 13.4823 73.4296 14.3269V21.0001H71.2127ZM82.2319 21.2112C81.2185 21.2112 80.2893 20.9719 79.4448 20.4933C78.6002 20.0147 77.9175 19.346 77.3967 18.4869C76.8759 17.6283 76.6155 16.6356 76.6155 15.5093C76.6155 14.3831 76.8689 13.3837 77.3756 12.511C77.8823 11.6383 78.5579 10.9626 79.4026 10.4841C80.2471 10.0055 81.1832 9.76618 82.2108 9.76618C83.1961 9.76618 84.09 9.99144 84.8924 10.4419C85.6948 10.8923 86.3353 11.5327 86.8139 12.3632C87.2924 13.1937 87.5317 14.1508 87.5317 15.2348C87.5317 15.4037 87.5247 15.5867 87.5106 15.7838H78.4524C78.5087 16.4876 78.7621 17.0788 79.2125 17.5573C79.6629 18.0359 80.2681 18.2752 81.0282 18.2752C81.6335 18.2752 82.1543 18.1485 82.5907 17.8951C83.027 17.6418 83.3789 17.2969 83.6463 16.8605L85.2511 17.6206C84.9133 18.2963 84.3925 18.8453 83.6885 19.2676C82.9847 19.6899 82.1543 19.901 81.1972 19.901L82.2319 21.2112ZM82.1264 11.0753C81.4367 11.0753 80.8595 11.2864 80.395 11.7087C79.9305 12.131 79.6208 12.694 79.4659 13.3978H84.8503C84.7658 12.7221 84.4843 12.1803 84.0057 11.772C83.5272 11.3638 82.9077 11.1598 82.1475 11.1598L82.1264 11.0753ZM94.2091 21.0001V8.01355H95.9614V11.5821L96.067 11.5398C96.3907 10.9768 96.8482 10.537 97.4394 10.2202C98.0306 9.90349 98.7133 9.74507 99.4875 9.74507C100.515 9.74507 101.402 9.9844 102.148 10.463C102.894 10.9416 103.464 11.6031 103.858 12.4476C104.252 13.2922 104.449 14.2494 104.449 15.3193V15.6571C104.449 16.727 104.252 17.6841 103.858 18.5287C103.464 19.3733 102.894 20.0348 102.148 20.5134C101.402 20.992 100.515 21.2313 99.4875 21.2313C98.657 21.2313 97.9462 21.0553 97.355 20.7034C96.7638 20.3515 96.3344 19.8951 96.067 19.3321L95.9614 19.2899V21.0001H94.2091ZM99.2764 19.6265C99.9239 19.6265 100.508 19.4646 101.028 19.1408C101.549 18.817 101.957 18.3666 102.253 17.7895C102.548 17.2124 102.696 16.5722 102.696 15.8684V15.1082C102.696 14.4044 102.548 13.7641 102.253 13.187C101.957 12.6099 101.549 12.1595 101.028 11.8357C100.508 11.512 99.9239 11.3501 99.2764 11.3501C98.629 11.3501 98.0519 11.512 97.5311 11.8357C97.0103 12.1595 96.6021 12.6099 96.3065 13.187C96.0109 13.7641 95.8631 14.4044 95.8631 15.1082V15.8684C95.8631 16.5722 96.0109 17.2124 96.3065 17.7895C96.6021 18.3666 97.0103 18.817 97.5311 19.1408C98.0519 19.4646 98.629 19.6265 99.2764 19.6265ZM109.911 21.0001V8.01355H111.663V21.0001H109.911ZM118.81 21.2112C117.782 21.2112 116.853 20.9719 116.023 20.4933C115.192 20.0147 114.524 19.346 114.017 18.4869C113.51 17.6283 113.257 16.6356 113.257 15.5093C113.257 14.3831 113.51 13.3837 114.017 12.511C114.524 11.6383 115.192 10.9626 116.023 10.4841C116.853 10.0055 117.782 9.76618 118.81 9.76618C119.64 9.76618 120.4 9.94921 121.09 10.3152C121.78 10.6812 122.336 11.195 122.758 11.8566L122.863 10.0195H124.595V21.0001H122.821V19.1631L122.716 19.1209C122.294 19.7825 121.745 20.2962 121.069 20.6622C120.393 21.0282 119.64 21.2112 118.81 21.2112ZM118.958 19.6054C119.619 19.6054 120.224 19.4435 120.773 19.1197C121.322 18.7959 121.751 18.3455 122.061 17.7684C122.371 17.1913 122.525 16.53 122.525 15.7838V15.2348C122.525 14.4888 122.371 13.8272 122.061 13.2501C121.751 12.673 121.322 12.2226 120.773 11.8988C120.224 11.5751 119.619 11.4132 118.958 11.4132C118.31 11.4132 117.712 11.5751 117.163 11.8988C116.614 12.2226 116.185 12.673 115.875 13.2501C115.565 13.8272 115.411 14.4888 115.411 15.2348V15.7838C115.411 16.53 115.565 17.1913 115.875 17.7684C116.185 18.3455 116.614 18.7959 117.163 19.1197C117.712 19.4435 118.31 19.6054 118.958 19.6265ZM2.2218 14.6621L9.1257 18.5985L2.2218 14.6621Z" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 2.2218 14.6621)" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 7.8064 10.3486)" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 12.2517 14.793)" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 6.66711 19.1074)" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 16.697 19.2383)" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 22.2815 14.9248)" fill="#1D1D1D"/>
              <rect width="8.08265" height="3.14325" transform="matrix(0.965926 -0.258819 0.707107 0.707107 17.8363 10.4785)" fill="#1D1D1D"/>
             </svg>
          </a>
        </Link>

        {/* Desktop Menu */}
        <div className="hidden md:flex gap-8 items-center">
          {links.map((link) => (
            <a
              key={link.label}
              href={link.href}
              className="text-sm font-medium hover:text-primary transition-colors"
            >
              {link.label}
            </a>
          ))}
        </div>

        {/* Desktop Buttons */}
        <div className="hidden md:flex gap-4 items-center">
          <button className="text-sm font-medium hover:text-primary transition-colors">
            Login
          </button>
          <button className="px-5 py-2.5 rounded-full bg-primary text-primary-foreground font-medium text-sm hover:bg-primary/90 transition-all border border-transparent shadow-sm">
            Start for free
          </button>
        </div>

        {/* Mobile Menu Toggle */}
        <button
          className="md:hidden text-foreground hover:text-primary transition-colors"
          onClick={() => setIsOpen(!isOpen)}
          aria-label="Toggle menu"
        >
          {isOpen ? <X size={24} /> : <Menu size={24} />}
        </button>
      </div>

      {/* Mobile Menu Overlay */}
      <AnimatePresence>
        {isOpen && (
          <motion.div
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -20 }}
            className="absolute top-full left-0 w-full bg-background border-b border-border md:hidden shadow-lg"
          >
            <div className="flex flex-col p-6 gap-6">
              {links.map((link) => (
                <a
                  key={link.label}
                  href={link.href}
                  className="text-lg font-medium hover:text-primary transition-colors"
                  onClick={() => setIsOpen(false)}
                >
                  {link.label}
                </a>
              ))}
              <div className="flex flex-col gap-4 mt-4 pt-4 border-t border-border">
                <button className="text-lg font-medium hover:text-primary transition-colors text-left">
                  Login
                </button>
                <button className="px-5 py-3 rounded-full bg-primary text-primary-foreground font-medium text-lg hover:bg-primary/90 transition-all text-center">
                  Start for free
                </button>
              </div>
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </nav>
  );
}
